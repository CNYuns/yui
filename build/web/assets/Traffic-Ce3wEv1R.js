import{i as m}from"./index-Bb6yjXMn.js";import{d as _,r as h,o as y,b as g,e as v,f as r,g as i,w as s,i as c,j as x,_ as B}from"./index-Cagw-rQE.js";const w={class:"page-container"},$=_({__name:"Traffic",setup(M){const l=h();let d;y(async()=>{await p()});async function p(){try{const e=await g.stats.getDaily(30);f(e.data||[])}catch{f([])}}function f(e){l.value&&(d=m(l.value),d.setOption({tooltip:{trigger:"axis",formatter:t=>{let a=`<div style="font-weight:bold">${t[0].name}</div>`;return t.forEach(o=>{a+=`<div>${o.seriesName}: ${u(o.value)}</div>`}),a}},legend:{data:["上传","下载"]},grid:{left:"3%",right:"4%",bottom:"3%",containLabel:!0},xAxis:{type:"category",boundaryGap:!1,data:e.map(t=>t.date)},yAxis:{type:"value",axisLabel:{formatter:t=>u(t,!0)}},series:[{name:"上传",type:"line",smooth:!0,areaStyle:{opacity:.3},data:e.map(t=>t.upload)},{name:"下载",type:"line",smooth:!0,areaStyle:{opacity:.3},data:e.map(t=>t.download)}]}))}function u(e,t=!1){if(!e)return"0 B";const n=["B","KB","MB","GB","TB"],a=Math.floor(Math.log(e)/Math.log(1024)),o=(e/Math.pow(1024,a)).toFixed(2);return t?`${o}${n[a]}`:`${o} ${n[a]}`}return(e,t)=>{const n=c("el-card"),a=c("el-col"),o=c("el-row");return x(),v("div",w,[t[1]||(t[1]=r("div",{class:"page-header"},[r("h2",null,"流量统计")],-1)),i(o,{gutter:20},{default:s(()=>[i(a,{span:24},{default:s(()=>[i(n,null,{header:s(()=>[...t[0]||(t[0]=[r("span",null,"流量趋势",-1)])]),default:s(()=>[r("div",{ref_key:"chartRef",ref:l,class:"chart"},null,512)]),_:1})]),_:1})]),_:1})])}}}),k=B($,[["__scopeId","data-v-d8d69026"]]);export{k as default};
